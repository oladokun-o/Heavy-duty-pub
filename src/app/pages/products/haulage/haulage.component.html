<app-page-head parent="Asphalt"
  [title]="product && product.name ? product.name : ''"></app-page-head>

<div class="page-content">
  <div class="uk-section uk-container">
    <div class="uk-grid" data-uk-grid>
      <div class="col-12">
        <div *ngIf="product" class="equipment-detail">
          <div class="equipment-detail__gallery">
            <div data-uk-slideshow="min-height: 300; max-height: 430"
              class="uk-slideshow">
              <div class="uk-position-relative">
                <ul *ngIf="product.imageUrl || product.gallery"
                  class="uk-slideshow-items uk-child-width-1-1"
                  data-uk-lightbox="animation: scale"
                  style="min-height: 430px;">
                  <li *ngIf="product.imageUrl as img" tabindex="-1"
                    class="uk-active uk-transition-active"
                    style="transform: translate3d(0px, 0px, 0px);">
                    <a [href]="img">
                      <img class="uk-width-1-1 uk-cover" [src]="img"
                        alt="img-gallery"
                        data-uk-cover style="height: 471px; width: 786px;">
                    </a>
                  </li>
                  <li *ngFor="let img of product.gallery" tabindex="-1"
                    class="uk-active uk-transition-active"
                    style="transform: translate3d(0px, 0px, 0px);">
                    <a [href]="img">
                      <img class="uk-width-1-1 uk-cover" [src]="img"
                        alt="img-gallery"
                        data-uk-cover style="height: 471px; width: 786px;">
                    </a>
                  </li>
                </ul>

                <a
                  class="uk-position-center-left uk-position-small uk-hidden-hover uk-icon uk-slidenav-previous uk-slidenav"
                  href="#" data-uk-slidenav-previous
                  data-uk-slideshow-item="previous">
                  <svg width="14" height="24" viewBox="0 0 14 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <polyline fill="none" stroke="#000" stroke-width="1.4"
                      points="12.775,1 1.225,12 12.775,23 ">
                    </polyline>
                  </svg>
                </a>

                <a
                  class="uk-position-center-right uk-position-small uk-hidden-hover uk-icon uk-slidenav-next uk-slidenav"
                  href="#" data-uk-slidenav-next data-uk-slideshow-item="next">
                  <svg width="14" height="24" viewBox="0 0 14 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <polyline fill="none" stroke="#000" stroke-width="1.4"
                      points="1.225,23 12.775,12 1.225,1 ">
                    </polyline>
                  </svg>
                </a>
              </div>
              <div class="uk-margin-top uk-slider uk-slider-container"
                data-uk-slider>
                <ul
                  *ngIf="product.gallery"
                  class="uk-thumbnav uk-slider-items uk-grid uk-grid-small uk-child-width-1-2 uk-child-width-1-3@s uk-child-width-1-4@m uk-child-width-1-5@l"
                  style="transform: translate3d(0px, 0px, 0px);">
                  <li *ngFor="let img of product.gallery"
                    data-uk-slideshow-item="0" tabindex="-1" class="uk-active">
                    <a href="#">
                      <img [src]="img" alt="img-gallery">
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="container-fluid px-0">
            <div class="row">
              <div class="col-12 col-md-8">
                <div class="equipment-detail__title">{{ product.name }}</div>
                <div class="equipment-detail__location">
                  <span data-uk-icon="location" class="uk-icon"></span>Nigeria
                </div>

                <div class="col-12">
                  <ng-select *ngIf="product.prices" [items]="product.prices"
                    placeholder="Select rent duration" bindLabel
                    bindValue="value" [clearable]="false" class="pb-2"
                    (change)="handlePriceChange($event, product)"></ng-select>
                  <div
                    class="equipment-item__price pt-3 col-12 d-flex flex-row justify-content-between align-items-center flex-wrap gap-3">
                    <div class="equipment-item__price-current col-6 fs-6"
                      *ngIf="product.price !== undefined">
                      ₦{{ product.price | number }}
                    </div>

                    <div class="col-4 d-flex flex-row justify-content-end"
                      *ngIf="product.price !== undefined">
                      <button type="button" class="qty-btn"
                        ngbTooltip="Decrease quantity"
                        [disabled]="product.qty === 1"
                        (click)="dec(product)">-</button>
                      <input type="text" class="col-3 text-center border-0"
                      #input [value]="product.qty" (change)="updateQuantity(product, Number(input.value))">
                      <button type="button" class="qty-btn"
                        ngbTooltip="Increase quantity"
                        (click)="inc(product)">+</button>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-12 col-md-4">
                <div class="equipment-order">
                  <!-- <div class="equipment-order__title">[Equipment Current Price]</div> -->
                  <div class="equipment-order__price">
                    <span *ngIf="product.amount || product.price"
                      class="current-price">
                      ₦{{ (product.amount ? product.amount : product.price) |
                      number }}
                    </span>
                    <span *ngIf="!product.amount && !product.price"
                      class="current-price">
                      ₦0.00
                    </span>
                    <!-- <span class="old-price">$75,300</span> -->
                  </div>
                </div>
                <button
                  class="uk-button uk-button-danger uk-button-large uk-width-1-1"
                  (click)="addToCart(product)" [disabled]="!product.price">
                  <span>Order Now</span>
                  <span data-uk-icon="arrow-right" class="uk-icon"></span>
                </button>
              </div>
            </div>
          </div>

          <div class="equipment-detail__desc mt-4">
            <div class="section-title">
              <h3>Description</h3>
            </div>
            <article [innerHTML]="product.description"></article>

          </div>
          <div *ngIf="product.meta" class="equipment-detail__specification">
            <div class="section-title">
              <h3>Specification</h3>
            </div>
            <div class="tbody">
            </div>
            <table class="uk-table uk-table-striped">
              <tbody>
                <tr *ngFor="let item of product.meta | keyvalue">
                  <td>
                    <span class="text-capitalize">{{ item.key
                      }}</span>:
                  </td>
                  <td>
                    {{ item.value }}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <h1 *ngIf="!product" class="fs-1">
          Product not found
        </h1>
      </div>
    </div>
  </div>
</div>

<section class="s-equipments">
  <div class="uk-section uk-container uk-container-large">
    <div class="section-title --center">
      <span></span>
      <h3>Related Products Available</h3>
    </div>
    <app-asphalts [hideHead]="true"></app-asphalts>
  </div>
</section>
